{"ast":null,"code":"var _jsxFileName = \"/Users/merveyitmez/Desktop/flight/frontend/src/pages/AddFlight.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport axios from \"axios\";\nimport { Center } from \"../components/styles\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { TextField, Paper, Box, Button } from \"@mui/material\";\nimport { useState, useRef } from \"react\";\nimport { DialogBoxx } from \"../features\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst dateNow = new Date(); // Creating a new date object with the current date and time\n\nconst year = dateNow.getFullYear(); // Getting current year from the created Date object\n\nconst monthWithOffset = dateNow.getUTCMonth() + 1; // January is 0 by default in JS. Offsetting +1 to fix date for calendar.\n\nconst month = // Setting current Month number from current Date object\nmonthWithOffset.toString().length < 2 // Checking if month is < 10 and pre-prending 0 to adjust for date input.\n? `0${monthWithOffset}` : monthWithOffset;\nconst date = dateNow.getUTCDate().toString().length < 2 // Checking if date is < 10 and pre-prending 0 if not to adjust for date input.\n? `0${dateNow.getUTCDate()}` : dateNow.getUTCDate();\nconst materialDateInput = `${year}-${month}-${date}`; // combining to format for defaultValue or value attribute of material <TextField>\n\nconst schema = yup.object().shape({\n  flightNum: yup.number().typeError(\"Please enter a valid Flight Number.\").min(1, \"The Flight Number must be greater than 0\").max(999999, \"Flight Numbers can only be between 0 and 1,000,000\").required(),\n  depDate: yup.date().typeError(\"Please select a Departure Date.\").required(),\n  arrDate: yup.date().typeError(\"Please enter an Arrival Date.\").min(yup.ref(\"depDate\"), \"Arrival date must be after Departure date\").required(),\n  depTime: yup.string().required(\"Please enter a valid Departure Time.\"),\n  arrTime: yup.string().required(\"Please enter a valid Arrival Time.\"),\n  depAirport: yup.string().matches(/^[a-zA-Z]{0,3}$/, \"Airport Code must be three letters\").required(\"Please enter a valid Departure Airport.\"),\n  arrAirport: yup.string().matches(/^[a-zA-Z]{0,3}$/, \"Airport Code must be three letters\").required(\"Please enter a valid Arrival Airport.\"),\n  numPass: yup.number().typeError(\"Please enter a valid Number of Passengers.\").min(0, \"The Number of passengers must be a positive number\").max(400, \"The number of passengers cannot exceed 400\").required(),\n  passLimit: yup.number().typeError(\"Please enter a valid Passenger Limit\").min(1, \"The Passenger limit must be greater than 0\").max(400, \"The Passenger Limit cannot exceed 400\").moreThan(yup.ref(\"numPass\"), \"Number of passengers must be less than the limit\").required()\n});\nexport const AddFlight = () => {\n  _s();\n\n  let dialogDupFlightNum;\n  const [dupCheck, setDupCheck] = useState(false); //duplicate flight number checker\n  // use to navigate back to homepage on submit\n\n  const navigate = useNavigate(); // Create the hook for react-hook-form\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const flightNumberRef = useRef();\n  const departureDateRef = useRef();\n  const arrivalDateRef = useRef();\n  const departureTimeRef = useRef();\n  const arrivalTimeRef = useRef();\n  const departureAirportRef = useRef();\n  const arrivalAirportRef = useRef();\n  const numPassengersRef = useRef();\n  const passengerLimitRef = useRef(); // create ref but without using already assigned ref .\n\n  const flightNumberReg = register(\"flightNum\");\n  const depDateReg = register(\"depDate\");\n  const arrDateReg = register(\"arrDate\");\n  const depTimeReg = register(\"depTime\");\n  const arrTimeReg = register(\"arrTime\");\n  const depAirportReg = register(\"depAirport\");\n  const arrAirportReg = register(\"arrAirport\");\n  const numPassReg = register(\"numPass\");\n  const passLimitReg = register(\"passLimit\"); // If the flight number is already in the DB, call the error dialog box to inform user\n\n  if (dupCheck === true) {\n    dialogDupFlightNum = /*#__PURE__*/_jsxDEV(DialogBoxx, {\n      setDupCheck: setDupCheck,\n      dupCheck: dupCheck\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  } //function to pull the input refs from the users entry and add them to the DB\n\n\n  const useSubmit = async () => {\n    try {\n      await axios.post(\"http://localhost:8085/flights\", {\n        // Must use exact name to link with the DB\n        flightNumber: flightNumberRef.current.value,\n        departureDate: departureDateRef.current.value,\n        arrivalDate: arrivalDateRef.current.value,\n        departureTime: departureTimeRef.current.value,\n        arrivalTime: arrivalTimeRef.current.value,\n        departureAirport: departureAirportRef.current.value,\n        arrivalAirport: arrivalAirportRef.current.value,\n        currentNumOfPassengers: numPassengersRef.current.value,\n        passengerLimit: passengerLimitRef.current.value\n      });\n      navigate(\"../\", {\n        replace: true\n      });\n    } catch (err) {\n      // if the flight number already exists, setDupCheck to call dialog box\n      if (err.message.indexOf(\"0\") !== 1) {\n        setDupCheck(true);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [dialogDupFlightNum, /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: 45\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AddFlight, \"C/Pke0HwX9iDrC7yTvGW282Upt4=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c = AddFlight;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFlight\");","map":{"version":3,"names":["React","axios","Center","useForm","useNavigate","yupResolver","yup","TextField","Paper","Box","Button","useState","useRef","DialogBoxx","useEffect","dateNow","Date","year","getFullYear","monthWithOffset","getUTCMonth","month","toString","length","date","getUTCDate","materialDateInput","schema","object","shape","flightNum","number","typeError","min","max","required","depDate","arrDate","ref","depTime","string","arrTime","depAirport","matches","arrAirport","numPass","passLimit","moreThan","AddFlight","dialogDupFlightNum","dupCheck","setDupCheck","navigate","register","handleSubmit","formState","errors","resolver","flightNumberRef","departureDateRef","arrivalDateRef","departureTimeRef","arrivalTimeRef","departureAirportRef","arrivalAirportRef","numPassengersRef","passengerLimitRef","flightNumberReg","depDateReg","arrDateReg","depTimeReg","arrTimeReg","depAirportReg","arrAirportReg","numPassReg","passLimitReg","useSubmit","post","flightNumber","current","value","departureDate","arrivalDate","departureTime","arrivalTime","departureAirport","arrivalAirport","currentNumOfPassengers","passengerLimit","replace","err","message","indexOf","margin"],"sources":["/Users/merveyitmez/Desktop/flight/frontend/src/pages/AddFlight.jsx"],"sourcesContent":["import * as React from \"react\";\nimport axios from \"axios\";\nimport { Center } from \"../components/styles\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { TextField, Paper, Box, Button } from \"@mui/material\";\nimport { useState, useRef } from \"react\";\nimport { DialogBoxx } from \"../features\";\nimport { useEffect } from \"react\";\n\nconst dateNow = new Date(); // Creating a new date object with the current date and time\nconst year = dateNow.getFullYear(); // Getting current year from the created Date object\nconst monthWithOffset = dateNow.getUTCMonth() + 1; // January is 0 by default in JS. Offsetting +1 to fix date for calendar.\nconst month = // Setting current Month number from current Date object\n  monthWithOffset.toString().length < 2 // Checking if month is < 10 and pre-prending 0 to adjust for date input.\n    ? `0${monthWithOffset}`\n    : monthWithOffset;\nconst date =\n  dateNow.getUTCDate().toString().length < 2 // Checking if date is < 10 and pre-prending 0 if not to adjust for date input.\n    ? `0${dateNow.getUTCDate()}`\n    : dateNow.getUTCDate();\n\nconst materialDateInput = `${year}-${month}-${date}`; // combining to format for defaultValue or value attribute of material <TextField>\n\nconst schema = yup.object().shape({\n  flightNum: yup\n    .number()\n    .typeError(\"Please enter a valid Flight Number.\")\n    .min(1, \"The Flight Number must be greater than 0\")\n    .max(999999, \"Flight Numbers can only be between 0 and 1,000,000\")\n    .required(),\n  depDate: yup.date().typeError(\"Please select a Departure Date.\").required(),\n  arrDate: yup\n    .date()\n    .typeError(\"Please enter an Arrival Date.\")\n    .min(yup.ref(\"depDate\"), \"Arrival date must be after Departure date\")\n    .required(),\n  depTime: yup.string().required(\"Please enter a valid Departure Time.\"),\n  arrTime: yup.string().required(\"Please enter a valid Arrival Time.\"),\n  depAirport: yup\n    .string()\n    .matches(/^[a-zA-Z]{0,3}$/, \"Airport Code must be three letters\")\n    .required(\"Please enter a valid Departure Airport.\"),\n  arrAirport: yup\n    .string()\n    .matches(/^[a-zA-Z]{0,3}$/, \"Airport Code must be three letters\")\n    .required(\"Please enter a valid Arrival Airport.\"),\n  numPass: yup\n    .number()\n    .typeError(\"Please enter a valid Number of Passengers.\")\n    .min(0, \"The Number of passengers must be a positive number\")\n    .max(400, \"The number of passengers cannot exceed 400\")\n    .required(),\n  passLimit: yup\n    .number()\n    .typeError(\"Please enter a valid Passenger Limit\")\n    .min(1, \"The Passenger limit must be greater than 0\")\n    .max(400, \"The Passenger Limit cannot exceed 400\")\n    .moreThan(\n      yup.ref(\"numPass\"),\n      \"Number of passengers must be less than the limit\"\n    )\n    .required(),\n});\n\nexport const AddFlight = () => {\n  let dialogDupFlightNum;\n\n  const [dupCheck, setDupCheck] = useState(false); //duplicate flight number checker\n\n  // use to navigate back to homepage on submit\n  const navigate = useNavigate();\n\n  // Create the hook for react-hook-form\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  const flightNumberRef = useRef();\n  const departureDateRef = useRef();\n  const arrivalDateRef = useRef();\n  const departureTimeRef = useRef();\n  const arrivalTimeRef = useRef();\n  const departureAirportRef = useRef();\n  const arrivalAirportRef = useRef();\n  const numPassengersRef = useRef();\n  const passengerLimitRef = useRef();\n\n  // create ref but without using already assigned ref .\n  const flightNumberReg = register(\"flightNum\");\n  const depDateReg = register(\"depDate\");\n  const arrDateReg = register(\"arrDate\");\n  const depTimeReg = register(\"depTime\");\n  const arrTimeReg = register(\"arrTime\");\n  const depAirportReg = register(\"depAirport\");\n  const arrAirportReg = register(\"arrAirport\");\n  const numPassReg = register(\"numPass\");\n  const passLimitReg = register(\"passLimit\");\n\n  // If the flight number is already in the DB, call the error dialog box to inform user\n  if (dupCheck === true) {\n    dialogDupFlightNum = (\n      <DialogBoxx setDupCheck={setDupCheck} dupCheck={dupCheck}></DialogBoxx>\n    );\n  }\n\n  //function to pull the input refs from the users entry and add them to the DB\n  const useSubmit = async () => {\n    try {\n      await axios.post(\"http://localhost:8085/flights\", {\n        // Must use exact name to link with the DB\n        flightNumber: flightNumberRef.current.value,\n        departureDate: departureDateRef.current.value,\n        arrivalDate: arrivalDateRef.current.value,\n        departureTime: departureTimeRef.current.value,\n        arrivalTime: arrivalTimeRef.current.value,\n        departureAirport: departureAirportRef.current.value,\n        arrivalAirport: arrivalAirportRef.current.value,\n        currentNumOfPassengers: numPassengersRef.current.value,\n        passengerLimit: passengerLimitRef.current.value,\n      });\n\n      navigate(\"../\", { replace: true });\n    } catch (err) {\n      // if the flight number already exists, setDupCheck to call dialog box\n      if (err.message.indexOf(\"0\") !== 1) {\n        setDupCheck(true);\n      }\n    }\n  };\n\n  return (\n    <>\n      {dialogDupFlightNum}\n      <div>\n        <div style={{ margin: 45 }}>\n          <Paper elevation={24}></Paper>\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}